!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.airplay=t())}(this,(function(){"use strict";var e={MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:"loadedmetadata",DATA:"loadeddata",PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource"};var t={coords:"0 0 512 512",link:"#fp-airplay",name:"fp-airplay"},n=[].slice;var r=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()&&{passive:!0},i=["touchstart","touchmove"];function o(e){return e.emit=function(t,n,r){r=r||{};var i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}(t);return n&&function(e,t){for(var n in t)e[n]=t[n]}(i,{data:n||{}}),e.dispatchEvent(i),!1===r.return_self?i:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(e){return~i.indexOf(e)}(t)?e.addEventListener(t,n,r):e.addEventListener(t,n)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function r(i){e.off(t,r),n(i)}))},e}var a=Array.isArray,u="undefined"!=typeof window&&o(window),s="undefined"!=typeof document&&o(document),l=["span","a","em","p","i"],c=l.concat(["div","strong","video","img","ol","ul","li","script"]);function f(e,t,n){var r=E(document.createElement(e));if(a(t)&&(n=t,t=!1),a(n)||(n=[n]),r.append(n.filter((function(e){return e}))),"object"!=typeof t)return r;for(var i in t)i in r?r[i]=t[i]:r.setAttribute(i,t[i]);return r}function d(e){var t=e.tagName;e.__flowplayer__=1,e.find=function(t){var n=e.querySelector(t);return n?E(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var r=e.insert=function(t,n){return a(n)?n.map((function(n){return e.insert(t,n)}))[0]:E(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n))};return e.append=r.bind(e,"beforeend"),e.prepend=r.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var r in t)e.css(r,t[r]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~l.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(" ").forEach((function(t){e.hasClass(t)||(e.className+=(e.className?" ":"")+t)})),e},e.removeClass=function(t){t=t.split(" ");var n=e.className.split(" ");return e.className=n.filter((function(e){return!~t.indexOf(e)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(t){return r=e.querySelectorAll(t),n.call(r);var r},e.hasClass=function(t){return~e.className.split(" ").indexOf(t)},e}function E(e){return void 0===e||function(e){return e&&e.__flowplayer__}(e)?e:d(o(e))}function p(e,t){if("string"==typeof e&&"<"==e[0])return f(e.slice(1,-1),t);if("string"!=typeof e)return E(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?E(n):void 0}function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function y(e){var t,n,r=A("svg");return r.setAttribute("viewBox",e.coords),e.name&&r.setAttribute("class",e.name),e.title&&r.setAttribute("title",e.title),e.title&&r.setAttribute("aria-label",e.title),r.setAttribute("tabindex","0"),r.setAttribute("focusable","true"),r.appendChild((t=e.link,(n=A("use")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),n)),p(r)}function v(t,n){if(!(this instanceof v))return new v(t,n);var r=this,i=r.button=v.render(r,n);n.attr("x-webkit-airplay","allow"),n.on(v.AVAILABILITY_CHANGE,(function(e){v.update(n,e)})),n.on(v.WIRELESS_CHANGE,(function(){return n.emit(n.webkitCurrentPlaybackTargetIsWireless?v.START:v.STOP),n.setState(v.ACTIVE_CLASS,n.webkitCurrentPlaybackTargetIsWireless)})),i.on(e.CLICK,(function(){n.webkitShowPlaybackTargetPicker()})),n.on(e.REAP,(function(){v.destroy(r)}))}return p.window=u,p.document=s,p.el=f,c.forEach((function(e){p[e]=function(t,n){return"string"==typeof t&&(t={class:t}),f(e,t,n)}})),v.of=v,e.AIRPLAY_START=v.START="start-airplay",e.AIRPLAY_STOP=v.STOP="stop-airplay",v.ACTIVE_CLASS="is-airplay",v.AVAILABLE_CLASS="is-airplay-available",v.AVAILABILITY_CHANGE="webkitplaybacktargetavailabilitychanged",v.WIRELESS_CHANGE="webkitcurrentplaybacktargetiswirelesschanged",v.AVAILABLE="available",v.supported="WebKitPlaybackTargetAvailabilityEvent"in window,v.unsupported=!v.supported,v.update=function(e,t){e.setState(v.AVAILABLE_CLASS,t.availability==v.AVAILABLE)},v.render=function(e,n){var r=y(t);return n.root.ui.header.secondary.prepend(r)},v.destroy=function(e){e.button=0},function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});var n=e.flowplayer;"function"==typeof n?n(t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t))}(window,(function(e,t,n){var r=(e.plugin||{}).airplay;v.unsupported||0==r||v.of(r,n)})),v}));
