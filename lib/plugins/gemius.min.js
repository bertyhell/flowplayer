!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.gemius=n())}(this,(function(){"use strict";function e(e,n,a){for(n=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(n);n.length;){if(null==e)return a;e=e[n.shift()]}return null==e?a:e}var n="loadedmetadata",a="pause",o="play",r="waiting",t="ended",i="seeking",u="reap",s="config",d=["playerID","gemiusID"],l=["programID","additionalParameters.programName","additionalParameters.programType"],f=["adName","adDuration","adType","campaignClassification","quality","resolution","volume"];function p(n,a){var o=[];return a.forEach((function(a){void 0===e(n,a)&&o.push(a)})),o.length&&console.warn("Missing Gemius configuration: ",o.join(", ")),0===o.length}return function(e,n){if("object"==typeof exports&&"undefined"!=typeof module)return n;"flowplayer"in e||(e.flowplayer={extensions:[]});var a=e.flowplayer;return"function"==typeof a?(a(n),n):(Array.isArray(a.extensions)||(a.extensions=[]),~a.extensions.indexOf(n)||a.extensions.push(n),n)}(window,(function(c,m,y){if("function"!=typeof GemiusPlayer)return console.warn("Gemius SDK needs to be loaded prior loading gemius plugin");var g,v=flowplayer.util.extend,w=e(c,"gemius.playerID"),D=e(c,"gemius.gemiusID"),E=e(c,"gemius.additionalParameters",{});if(p(e(c,"gemius",{}),d)){var P=new GemiusPlayer(w,D,E);P.setVideoObject(y),y.on(u,(function(){_("stop"),P=void 0,window.removeEventListener("beforeunload",x)})),y.on(s,(function(n){g=e(n.data,"gemius",{})})),y.on(n,(function(){p(g,l)&&P.newProgram(g.programID,g.additionalParameters)})),window.addEventListener("beforeunload",x);var h={};if(h[o]="play",h[a]="pause",h[r]="buffer",h[i]="seek",h[t]="complete",y.on(Object.keys(h),(function(e){P.programEvent(g.programID,y.currentTime,h[e.type])})),y.ads){var A=flowplayer.AdEvents;y.ads.on(A.AD_STARTED,(function(e){var n;P.newAd(e.vast_ad_id,(n=v(v({},E),function(e){return{adDuration:e.ad.duration,adType:e.ad_type,resolution:e.ad.width+"x"+e.ad.height,volume:e.volume}}(e)),f.reduce((function(e,a){return n&&n.hasOwnProperty(a)&&(e[a]=n[a]),e}),{}))),P.adEvent(g.programID,e.vast_ad_id,y.currentTime,"play",{autoPlay:e.autoPlay,volume:e.volume})})),[A.AD_PAUSED,A.AD_COMPLETED].forEach((function(e){var n;switch(e){case A.AD_PAUSED:n="pause";break;case A.AD_COMPLETED:n="complete"}y.ads.on(e,(function(e){P.adEvent(g.programID,e.vast_ad_id,y.currentTime,n)}))}))}}function _(e){(y.ads&&y.ads.adPlaying()?P.adEvent:P.programEvent).call(P,g.programID,y.currentTime,e)}function x(){_("close")}}))}));
