/*
   Flowplayer 
   @version 2.2.0
   @built   Mon, 14 Oct 2019 07:46:02 GMT
   @commit  1c041ed02b7ffd0f70168cae6c677143bcac890c
   @license Flowplayer commercial license - https://flowplayer.com/commercial-license
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.flowplayer=e.flowplayer||{},e.flowplayer.ovp=t())}(this,function(){"use strict";function e(){}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(){var e=me.call(arguments),n=e.shift();return e.reduce(t,n)}function r(e){return Array.isArray(e)?e.slice(0):e.split(".")}function o(e,t,n){for(t=r(t);t.length;){if(void 0===e||null===e)return n;e=e[t.shift()]}return void 0===e||null===e?n:e}function i(e,t,n){t=r(t);var i=t.pop(),a=o(e,t);return a&&(a[i]=n),e}function a(e){return e=parseInt(e,10),e>=10?e:"0"+e}function u(e){return me.call(e)}function c(e){return"function"==typeof e}function s(){throw new Error("Function was expected as Argument[0]")}function f(e){if(!(this instanceof f))return new f(e);var t=this;return t.data=e,t.tap=function(){var e=ve.call(arguments),n=e.shift();return n==f.lift?t.data:c(n)?(n.apply(t,[t.data].concat(e)),t):void s()},t.into=t.fmap=function(){var e=ve.call(arguments),n=e.shift();return n==f.lift?t.data:c(n)?f(n.apply(t,[t.data].concat(e))):void s()},t.unwrap=function(){return t.data},t}function l(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function d(e,t){return e.length===e.filter(t).length}function p(){return d(_e.call(arguments),ge)}function m(){return d(_e.call(arguments),l)}function y(e,t){for(var n in e)t(n,e[n])}function E(e){return l(e)?ge(e)?e.map(E):O({},e):e}function v(e,t){return y(t,function(t,n){if(void 0===e[t])return e[t]=E(n);e[t]=O(e[t],n)}),e}function _(e){return E(e)}function g(e,t){var n={};return y(e,function(e,t){n[e]=E(t)}),v(n,t)}function O(e,t){return p(e,t)?_(e,t):!1===e?e:!0===e&&!1!==t?t:!l(e)&&l(t)?t:void 0===e||l(e)?l(e)&&!l(t)?e:m(e,t)?g(e,t):void 0:e}function A(){return[].reduce.call(arguments,function(e,t){return O(e,t)},p.apply(null,arguments)?[]:{})}function h(){return A.apply(null,_e.call(arguments).reverse())}function w(e,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){try{var e=r.status;if(r.readyState<4)return;if(200!=e&&r.readyState>3&&"function"==typeof n.err){var o={status:e};try{t(o,JSON.parse(r.responseText))}catch(o){}return n.err(o)}n.ok(JSON.parse(r.responseText))}catch(o){console.error(o),n.err(o)}},r.send()}function N(){var e=[].join.call(arguments,"/");return"/"!==e[0]&&(e="/"+e),(flowplayer.OVP_API||"https://ljsp.lwcdn.com")+"/web/public/native/config"+e}function T(e,t){w((flowplayer.OVP_API||"https://ljsp.lwcdn.com")+"/web/public/countdown/time.json",{err:t.err,ok:function(n){var r=Date.now()-n.millisUtc;t.ok(O(e,{server_time_offset:r}))}})}function S(e){return~e.indexOf("/")?e:"/media/"+e}function C(e,t){var r=n({},e);return t.forEach(function(e){delete r[e]}),r}function R(e){"object"==typeof e&&Array.isArray(e.src)&&Ae.test(e.src[0])&&(e.src=e.src.reverse())}function L(e,t,n){n=n||{};for(var r in e)n[r]=o(t||{},e[r]);return n}function b(e){var t=o(e,"ima.ads");return Array.isArray(t)&&i(e,"ima.ads",t.map(function(t){return"number"==typeof t.percentage&&(t.time=t.percentage*e.duration),t})),e}function I(e,t){t="object"==typeof t?t:{};var n={title:o(e,"metadata.title",null),description:o(e,"metadata.description",null)};return R(e),h({ima:{parameters:L(he,n)}},n,e,C(t,we))}function D(e,t){var r=n({},e),i=h({},t,o(e,"playlist",{}));return n(i,{playlist:o(i,"playlist",[]).map(function(e){return I(e,r)})})}function U(e,t){return!(~e.indexOf(".")||!Ne.test(e))&&(t.type="video/ovp",!0)}function P(e){return"object"==typeof e&&"ovp/base64"==e.type}function M(e,t,n){return U(e,t)||P(t)}function j(e){try{return x(decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(e){return{err:e.message}}}function x(e){return null===e?{}:JSON.parse(e)}function V(e,t){if(P(t))return G(e,t);f(t).fmap(o,"src").fmap(S).fmap(N).fmap(w,{ok:f.curry(k,[e]),err:f.curry(Y,[e])})}function G(e,t){f(t).fmap(o,"src").fmap(f.maybe,j).fmap(f.maybe,f.curry(k,[e]))}function k(e,t){if(o(t,"playlist"))return H(e,t);if(o(t,"live"))return W(e,t);if(o(t,"src"))return F(e,t);throw new Error("Status[200] >> unhandled case\n"+JSON.stringify(t,null,2))}function Y(e,t){return t.message?e.emit(Se,t):t.status?e.emit(Se,new Error(Oe[t.status])):e.emit(Se,t)}function F(e,t){e.emit(Re,f.of(t).fmap(I,e.opts).fmap(b).fmap(f.lift))}function H(e,t){if("function"!=typeof flowplayer.playlist)return console.warn("OVP responded with Playlist media but the playlist plugin does not exist"),Y(e,{status:415});e.emit(Le,D(e.opts,t))}function W(e,t){var n=o(t,"metadata.live_start_time",o(t,"metadata.starttime"));i(t,"live_start_time",f.of(n).fmap(Date.parse).fmap(f.lift)),e.emit(Ie,f.of(t).fmap(I,e.opts).fmap(b).fmap(f.lift))}function q(e,t){if("object"==typeof Pe[t])return console.debug("using Cache(%s)",t),K(e,t,Pe[t]);f(t).fmap(N).fmap(w,{ok:f.curry(K,[e,t]),err:console.error})}function K(e,t,r){"object"!=typeof Pe[t]&&(Pe[t]=r);var a=o(e,"opts",{}),u=o(a,"metadata",{});i(u,"player_id",t),["title","description"].forEach(function(e){!0===r[e]&&"string"==typeof a[e]&&i(r,e,o(a,e))}),i(a,"metadata",u);var c=n(a,r);e.setOpts(c),r.autoplay&&e.togglePlay(!0)}function B(e,t,n){f.of("recommendation").fmap(N,t,n).fmap(w,{err:Q,ok:f.curry(z,[e])})}function Q(e){console.error("Failed to load recommendations: %j",e)}function z(e,t){var n=t.playlist;i(e,"opts.recommendations",n),o(n,"length",0)&&e.emit(Ee.RECOMMENDATIONS_READY,{playlist:n.map(function(e){return{poster:e.poster,src:e.src,title:o(e,"metadata.title"),metadata:e.metadata||{}}})})}function J(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}function X(e){return e.emit=function(n,r,o){o=o||{};var i=J(n);return r&&t(i,{data:r||{}}),e.dispatchEvent(i),!1===o.return_self?i:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach(function(t){e.addEventListener(t,n)}),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){function r(o){e.off(t,r),n(o)}return e.on(t,r)},e}function Z(e,t,n){var r=te(document.createElement(e));if(Ve(t)&&(n=t,t=!1),Ve(n)||(n=[n]),r.append(n.filter(function(e){return e})),"object"!=typeof t)return r;for(var o in t)o in r?r[o]=t[o]:r.setAttribute(o,t[o]);return r}function $(e){return e&&e[He]}function ee(e){var t=e.tagName;e[He]=1,e.find=function(t){var n=e.querySelector(t);return n?te(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML=je,e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var n=e.insert=function(t,n){return Ve(n)?n.map(function(n){return e.insert(t,n)})[0]:(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n),te(n))};return e.append=n.bind(e,"beforeend"),e.prepend=n.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var r in t)e.css(r,t[r]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~Ye.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return void 0==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(xe).forEach(function(t){e.hasClass(t)||(e.className+=(e.className?xe:je)+t)}),e},e.removeClass=function(t){t=t.split(xe);var n=e.className.split(xe);return e.className=n.filter(function(e){return!~t.indexOf(e)}).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(t){return u(e.querySelectorAll(t))},e.hasClass=function(t){return~e.className.split(xe).indexOf(t)},e}function te(e){return void 0===e?e:$(e)?e:ee(X(e))}function ne(e,t){if("string"==typeof e&&"<"==e[0])return Z(e.slice(1,-1),t);if("string"!=typeof e)return te(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?te(n):void 0}function re(e,t){var n=Date.now()-t;return Math.floor((e-n)/1e3)}function oe(e,t,n){function r(e){var r=o(e,"data.remaining",-1);if(r<0||isNaN(r))return n.emit(De);t.addClass("is-livecountdown"),i.countdown.txt(ae(r+1))}if(!(this instanceof oe))return new oe(e,t,n);var i=this;if(e.live_start_time<Date.now())return i;var a=0==n._t("ovp.starting_in").length?"Starting in":n._t("ovp.starting_in");i.container=t.append(ne.div({class:"fp-livecountdown"})),i.inner=i.container.append(ne.div({class:"fp-inner"})),i.inner.append(ne.p({},a)),i.countdown=i.inner.append(ne.p({class:"fp-countdown"})),n.on(be,r),n.one(De,function(){i.container&&i.container.remove(),t.removeClass("is-livecountdown"),n.off(be,r),i.container=i.inner=i.countdown=0}),ie(n,e)}function ie(t,n){function r(){clearInterval(c),clearInterval(s)}function i(){return re(n.live_start_time,o(n,"server_time_offset",0))}function a(){var e=i();if(t.emit(be,{remaining:e}),e<0||0===t.reaper)return r()}function u(){if(0===i()||0===t.reaper)return r();T(n,{err:console.error,ok:e})}var c,s;a()&&u(),c=setInterval(a,250),s=setInterval(u,1e4)}function ae(e){var t,n,r;t=Math.floor(e/86400),e-=86400*t,n=Math.floor(e/3600),e-=3600*n,r=Math.floor(e/60),e-=60*r;var o="";return t&&(o+=t+"d "),o+n+"h "+a(r)+"m "+a(e)+"s"}function ue(e,t,n){var r=We+t;if(!e.hasClass(r)){fe(e);var o=ce(r);o&&(se(o,"."+r+" .fp-color","background-color: #"+n+";"),e.addClass(r))}}function ce(e){if(document.getElementById(e))return!1;var t=document.createElement("style");return t.id=e,t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}function se(e,t,n,r){return"insertRule"in e?e.insertRule(t+"{"+n+"}",r):"addRule"in e?e.addRule(t,n,r):void 0}function fe(e){-1!=e.className.indexOf(We)&&(e.className=e.className.split(" ").filter(function(e){return-1==e.indexOf(We)}).join(" "))}function le(e,t,n,r){if(4==arguments.length&&"object"==typeof r)return"string"!=typeof e.player_id||0===r.src.indexOf(e.player_id)||P(r)||(r.src=[e.player_id,r.src].join("/")),V(n,r);n.on(Se,function(e){n.emit(Ee.ERROR,e.data)}),n.on(Ce,function(){n.setState(ye.WAITING,!0),e.recommendations&&(e.recommendations=1)}),n.on(Re,function(e){0==n.reaper||"object"!=typeof e.data||de(e.data)||(n.setOpts(e.data),n.setAttrs(e.data),n.setSrc(o(e,"data.src")),e.data.autoplay&&n.togglePlay(!0,function(){setTimeout(n.setState,0,ye.SEAMLESS,!1)}))}),n.on(Ee.CONFIG,function(r){var i=o(r,"data.brand_color"),a=o(r,"data.metadata.player_id");if(i&&a&&ue(t,a,i),"string"!=typeof e.src||!M(e.src,{},e))return"string"==typeof e.player_id&&o(e,"metadata.player_id")!==e.player_id?q(n,e.player_id):void 0}),n.on(Le,function(e){0!=n.reaper&&"object"==typeof e.data&&flowplayer.playlist(t,e.data)}),n.on(Ie,function(r){if(0!=n.reaper&&"object"==typeof r.data)return n.setOpts(r.data),n.setAttrs(r.data),de(r.data)?(new oe(e,t,n),void n.one(De,function(){return n.emit(Re,r.data)})):n.emit(Re,r.data)}),n.on(Ee.TIME_UPDATE,function(){e.live||e.recommendations&&o(e,"metadata.media_id")&&(Array.isArray(e.recommendations)||n.currentTime/n.duration<.8||B(n,o(e,"metadata.media_id"),o(e,"metadata.player_id")))})}function de(e){return e&&e.live_start_time-Date.now()>0}var pe="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},me=[].slice,ye={FULLSCREEN:"is-fullscreen",PLAYING:"is-playing",PAUSED:"is-paused",MUTED:"is-muted",LOADED:"is-loaded",LOADING:"is-loading",STARTING:"is-starting",SEEKING:"is-seeking",GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:"is-ended",LIVE:"is-live",ERRORED:"is-error",WAITING:"is-waiting",AUTOPLAY:"is-autoplay",SEAMLESS:"is-seamless",NO_AUTOPLAY:"no-autoplay",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline"},Ee={MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",METADATA:"loadedmetadata",DATA:"loadeddata",PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource"},ve=[].slice;f.of=f,f.lift=function(e){return e instanceof f?e.data:e},f._apply=function(e,t){if(0==t.length)return e();if(1==t.length)return e(t[0]);if(2==t.length)return e(t[0],t[1]);if(3==t.length)return e(t[0],t[1],t[2]);if(4==t.length)return e(t[0],t[1],t[2],t[3]);if(5==t.length)return e(t[0],t[1],t[2],t[3],t[4]);throw new Error("Pipe._apply() does not support arity > 5")},f.maybe=function(e,t,n){return e?f._apply(t,[e].concat(ve.call(arguments,2,arguments.length))):e},f.curry=function(e,t,n){return t=t||[],t.length>e.length-1?e.apply(n,t):function(){return t=t.concat(ve.call(arguments)),f.curry(e,t,n)}};var _e=[].slice,ge=Array.isArray,Oe={404:"media not found",402:"invalid subscription",400:"bad request",415:"unsupported media type"},Ae=/.mp4$/,he={media_id:"id",media_duration:"duration",media_name:"title",media_tags:"tags",category:"categoryName",ad_keywords:"adKeywords"},we=["src","metadata","title","description","duration","poster"],Ne=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/,Te=Object.freeze({base64:j,json:x}),Se="ovp:error",Ce="ovp:request:start",Re="ovp:request:media:complete",Le="ovp:request:playlist:complete",be="ovp:live:countdown:tick",Ie="ovp:live:countdown:start",De="ovp:live:countdown:complete",Ue=Object.freeze({OVP_ERROR:Se,OVP_MEDIA_REQUEST_START:Ce,OVP_MEDIA_REQUEST_COMPLETE:Re,OVP_PLAYLIST_REQUEST_COMPLETE:Le,LIVE_COUNTDOWN_TICK:be,LIVE_COUNTDOWN_START:Ie,LIVE_COUNTDOWN_COMPLETE:De}),Pe={},Me=Object.freeze({fetch_unknown_media:V,handle_base64:G,handle_200:k,handle_err:Y,handle_single_media:F,handle_playlist:H,handle_live:W,fetch_player_id:q,handle_player_only:K}),je="",xe=" ",Ve=Array.isArray,Ge="undefined"!=typeof window&&X(window),ke="undefined"!=typeof document&&X(document),Ye=["span","a","em","p","i"],Fe=Ye.concat(["div","strong","video","img","ol","ul","li","script"]),He="__flowplayer__";ne.window=Ge,ne.document=ke,ne.el=Z,Fe.forEach(function(e){ne[e]=function(t,n){return"string"==typeof t&&(t={class:t}),Z(e,t,n)}});var We="flowplayer-ovp-branding-";le.wants=M;var qe={events:Ue,Decode:Te,Loader:Me};return function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});var n=e.flowplayer;"function"==typeof n?n(t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t))}(function(){return"undefined"!=typeof window?window:void 0!==pe?pe:{}}(),t(le,qe)),le});