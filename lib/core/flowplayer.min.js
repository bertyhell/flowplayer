!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).flowplayer=t()}(this,(function(){"use strict";var e=[].slice;function t(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o in t)e[o]=t[o];return e}function n(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.slice(1).reduce((function(e,n){return t(e,n)}),e[0]||{})}function r(e){return Array.isArray(e)?e.slice(0):e.split(".")}function o(e,t,n){for(var o=r(t);o.length;){if(null==e)return n;var a=o.shift();if("string"!=typeof a)return n;e=e[a]}return null==e?n:e}function a(e,t,n){var a=(t=r(t)).pop(),i=o(e,t);return i&&a&&(i[a]=n),e}function i(e){var t="number"==typeof e?e:parseInt(e,10);return(t>9?"":"0")+t}function u(t){return e.call(t)}function s(e){return"string"!=typeof e?e:"false"!=e&&("true"==e||(isNaN(Number(e))?!!e:!!Number(e)))}var c=Object.freeze({__proto__:null,noop:function(){},extend:t,assign:n,make_path:r,lens:o,put:a,get:function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){var e=r.status;e>=400&&n&&n(e),200==e&&4==r.readyState&&t(r.responseText)},r.send()},zero_pad:i,prettyTime:function(e){if(isNaN(e)||e>=Number.MAX_SAFE_INTEGER)return"";var t=e<0?"-":"";e=Math.round(Math.abs(e));var n=Math.floor(e/3600),r=Math.floor(e/60);return e-=60*r,n>=1?t+n+":"+i(r-=60*n)+":"+i(e):t+i(r)+":"+i(e)},toArray:u,box:function(e){var t={val:e};return function(e){return void 0!==e&&(t.val=e),t.val}},as_bool:s}),l=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()&&{passive:!0},f=["touchstart","touchmove"];function d(e){return e.emit=function(n,r,o){o=o||{};var a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}(n);return r&&t(a,{data:r||{}}),e.dispatchEvent(a),!1===o.return_self?a:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(e){return~f.indexOf(e)}(t)?e.addEventListener(t,n,l):e.addEventListener(t,n)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function r(o){e.off(t,r),n(o)}))},e}var p=Array.isArray,v="undefined"!=typeof window&&d(window),y="undefined"!=typeof document&&d(document),h=["span","a","em","p","i"],m=h.concat(["div","strong","video","img","ol","ul","li","script"]);function g(e,t,n){var r=E(document.createElement(e));if(p(t)&&(n=t,t=!1),p(n)||(n=[n]),r.append(n.filter((function(e){return e}))),"object"!=typeof t)return r;for(var o in t)o in r?r[o]=t[o]:r.setAttribute(o,t[o]);return r}function E(e){return void 0===e||function(e){return e&&e.__flowplayer__}(e)?e:function(e){var t=e.tagName;e.__flowplayer__=1,e.find=function(t){var n=e.querySelector(t);return n?E(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var n=e.insert=function(t,n){return p(n)?n.map((function(n){return e.insert(t,n)}))[0]:E(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n))};return e.append=n.bind(e,"beforeend"),e.prepend=n.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var r in t)e.css(r,t[r]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~h.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(" ").forEach((function(t){e.hasClass(t)||(e.className+=(e.className?" ":"")+t)})),e},e.removeClass=function(t){t=t.split(" ");var n=e.className.split(" ");return e.className=n.filter((function(e){return!~t.indexOf(e)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(t){return u(e.querySelectorAll(t))},e.hasClass=function(t){return~e.className.split(" ").indexOf(t)},e}(d(e))}function S(e,t){if("string"==typeof e&&"<"==e[0])return g(e.slice(1,-1),t);if("string"!=typeof e)return E(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?E(n):void 0}S.window=v,S.document=y,S.el=g,m.forEach((function(e){S[e]=function(t,n){return"string"==typeof t&&(t={class:t}),g(e,t,n)}}));var w=[];function _(){return w.filter((function(e){return!e.paused}))}var b=Object.freeze({__proto__:null,instances:w,playing:_});const O="is-playing",A="is-paused",T="is-loading",N="is-starting",C="is-seeking",I="is-ended",L="is-waiting",R="is-seamless";var k=Object.freeze({__proto__:null,PLAYING:O,FULLSCREEN:"is-fullscreen",PAUSED:A,MUTED:"is-muted",LOADED:"is-loaded",LOADING:T,STARTING:N,SEEKING:C,GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:I,LIVE:"is-live",ERRORED:"is-error",WAITING:L,AUTOPLAY:"is-autoplay",SEAMLESS:R,NO_AUTOPLAY:"no-autoplay",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline",HAS_POSTER:"has-poster",TOUCHED:"is-touched",HOVERED:"is-hovered",TOUCH_DEVICE:"is-touch-device"});function P(e,t){try{var n=t.exec(e)[1];return parseFloat(n,10)}catch(e){return console.error(e),0}}function x(){var e="undefined"!=typeof document&&"undefined"!=typeof window,t=e?navigator.userAgent:"",n=/iP(hone|od)/i.test(t)&&!/iPad/.test(t)&&!/IEMobile/i.test(t),r=/Android/.test(t)&&!/Firefox/.test(t),o=/IEMobile/.test(t),a=o?P(t,/Windows Phone (\d+\.\d+)/):0,i=o?P(t,/IEMobile\/(\d+\.\d+)/):0,u=/^((?!chrome|android).)*safari/i.test(t),s=function(){if(!e)return!1;if(document.documentMode)return document.documentMode;for(var t=9;t>3;t--){var n=document.createElement("div");if(n.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",n.getElementsByTagName("span").length)return t}return!1}();return{controls:!n&&(!o||a>=8.1&&i>=11),video:function(t){return e&&document.createElement("video").canPlayType(t)},lang:e&&(window.navigator.userLanguage||window.navigator.language),android:r,iphone:n,ie:s,safari:u,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}}var U="loadedmetadata",D="loadeddata",M=Object.freeze({__proto__:null,MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:U,DATA:D,PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource",LANDSCAPE:"landscape",PORTRAIT:"portrait"});function j(e,t){var n=t.clientWidth;t.toggleClass("is-small",n<600).toggleClass("is-tiny",n<400)}S.window&&S.window.on(["load","resize"],(function(){w.forEach((function(e){var t=e.root;t.prevWidth!=t.clientWidth&&(e.emit("resize"),t.prevWidth=t.clientWidth)}))}));function H(e){var t=function(e){var t=e.getBoundingClientRect(),n=window.innerHeight,r=t.height,o=t.bottom,a=r/5;return t.top<=a&&t.top+r>n-a||o-r+a>=0&&o<n+a}(e.root);return e.in_viewport===t||(e.in_viewport=t,e.emit(t?"viewenter":"viewleave")),e}S.window&&S.window.on("scroll",(function(){w.forEach(H)}));var G=[function(e,t,n){var r=!0;t.addClass("flowplayer"),j(0,t),n.on(["loadstart","resize"],(function(){j(0,t)})),n.on("state",(function(e){Object.keys(n.playerState).forEach((function(n){t.toggleClass(n,e.data[n])}))})),n.on("timeupdate",(function(){n.setState(L,!1)})),n.on("config",(function(){var r=n.paused&&(!e.autoplay||t.hasClass("no-autoplay"))&&0==n.currentTime;[T,N].forEach((function(e){n.setState(e,r)}))})),n.on("ended",(function(t){setTimeout((function(){t.defaultPrevented||(e.rewind&&!n.loop&&(e.autoplay&&(e.autoplay=!1,n.setState("is-autoplay",!1),n.setState(R,!1)),n.setState(C,!0),n.one("seeked",(function(){n.setState(C,!1),n.pause(),n.setState(N,!0)})),n.currentTime=0),n.one("timeupdate",(function(){n.setState(I,!1)})),n.transitionState(I,O,e.loop||e.rewind?0:300))}),0)})),n.on(["seeking","seeked"],(function(e){n.setState(C,"seeking"==e.type),n.setState(A,n.paused),n.setState(O,!n.paused)})),n.on("ended",(function(){r=!0})),n.on(x().ios?U:D,(function(t){var r="src"!=t.type||!("none"==e.preload);n.setState("is-loaded",r),n.setState(T,!r)})),n.on(["waiting","canplay","loadstart"],(function(t){if(!n.hasState(C)&&("canplay"!=t.type||e.autoplay||n.setState(L,!1),"loadstart"!=t.type||"none"!=e.preload||e.autoplay)){if("loadstart"==t.type&&e.autoplay)return n.one("playing",(function(){n.setState(L,!1)}));"waiting"==t.type&&[O,A,N].forEach((function(e){n.setState(e,!1)})),n.setState(I,!1);var r=["waiting"];n.setState(L,r.indexOf(t.type)>-1)}})),n.on(["playing","pause"],(function(t){var o="playing"==t.type,a=n.currentTime==n.duration,i=o&&r&&e.autoplay||n.hasState(R)||n.hasState(L);if(o&&(n.started=!0),!e.seamless&&r&&n.setState(R,!1),o&&(r=!1),n.setState(L,!1).setState(N,!1),!a&&!n.hasState(C)){r&&n.setState(N,!1);var u=o?O:A,s=o?A:O;n.transitionState(u,s,i?0:300),o&&n.setState("no-autoplay",!1)}}))},function(e,t,n){var r=S.div({class:"fp-ratio"});r.set=function(e){e=function(e){if("number"==typeof e&&!isNaN(e))return Number(e);if("string"==typeof e){var t=e.split(":");return Number(t[1])/Number(t[0])}return e}(e||.5625),r.css("padding-top",isNaN(e)?e:100*e+"%")},t.reaper.put("aspect_ratio",r),t.append(r);var a=[D,U];n.on(a,(function(){r.set(e.ratio||n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth)})),n.on("config",(function(e){r.set(o(e,"data.ratio",n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth))}))},function(e,t,n){H(n);var r={should_resume:e.autoplay,has_user_gesture:!1,locked:!1};n.one(["touchend","click"],(function(){r.has_user_gesture=!0})),n.on("play",(function(){r.locked||(r.should_resume=!0)})),n.on("pause",(function(){r.locked||(r.should_resume=!1)})),n.on("canplay",(function(t){e.autoplay&&!_().size&&n.in_viewport&&n.paused&&r.should_resume&&n.togglePlay(!0)})),e.autopause&&(n.on("viewenter",(function(){r.should_resume&&n.togglePlay(!0)})),n.on("viewleave",(function(){var e=!n.paused;r.locked=!0,n.pause(),setTimeout((function(){r.should_resume=e,r.locked=!1}),0)})))}];function W(){return G.filter((function(e){return"function"==typeof e.wants}))}function F(e){return Array.isArray(e)?e.join("."):e}function V(e,t){return t.length-e.length}function Y(e){if(void 0!==e){if(e.reaper)return e.reaper;if(!(this instanceof Y))return new Y(e);var t=e.reaper=this;return t.tree=e,t.props=[],t.push=function(e){return t.props=t.props.concat(e),t},t.put=function(n,r){return t.push(n),a(e,n,r),r},t.run=function(n){(n=Array.isArray(n)?n:[]).push(t);for(var r=t.props.map(F).sort(V);r.length;){var i=r.shift(),u=o(e,i);u&&u.reaper&&!~n.indexOf(u.reaper)&&u.reaper.run(n),a(e,i,0)}for(var s in t)delete t[s];delete n[n.indexOf(t)],e.reaper=0},t}}function q(e){this.message=e}q.prototype=new Error,q.prototype.name="InvalidCharacterError";var z="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new q("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,a=0,i="";r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};var B=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(z(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return z(t)}};function K(e){this.message=e}K.prototype=new Error,K.prototype.name="InvalidTokenError";var Q=function(e,t){if("string"!=typeof e)throw new K("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(B(e.split(".")[n]))}catch(e){throw new K("Invalid token specified: "+e.message)}};Q.InvalidTokenError=K;var X={OFF:0,ON:1,AUDIO_REQUIRED:2};function J(){var e=this,t={};e.has=function(e){return!!t[e]},e.get=function(e){return t[e]},e.put=function(n,r){return t[n]=r,e},e.delete=function(n){return delete t[n],e},e.keys=function(){var e=[];for(var n in t)e.push(n);return e},e.each=function(n,r){for(var o in t)n.call(r||e,t[o],o);return e}}function Z(e){return"function"==typeof e}function $(){throw new Error("Function was expected as Argument[0]")}var ee=[].slice;function te(e){if(!(this instanceof te))return new te(e);var t=this;return t.data=e,t.tap=function(){var e=ee.call(arguments),n=e.shift();return n==te.lift?t.data:Z(n)?(n.apply(t,[t.data].concat(e)),t):void $()},t.into=t.fmap=function(){var e=ee.call(arguments),n=e.shift();return n==te.lift?t.data:Z(n)?te(n.apply(t,[t.data].concat(e))):void $()},t.unwrap=function(){return t.data},t}function ne(e,t,n,r){te.of(n).fmap(e.get).fmap(o,t).fmap(te.maybe,te.apply,r)}te.of=te,te.lift=function(e){return e instanceof te?e.data:e},te._apply=te.apply=function(e,t){if(0==t.length)return e();if(1==t.length)return e(t[0]);if(2==t.length)return e(t[0],t[1]);if(3==t.length)return e(t[0],t[1],t[2]);if(4==t.length)return e(t[0],t[1],t[2],t[3]);if(5==t.length)return e(t[0],t[1],t[2],t[3],t[4]);throw new Error("Pipe._apply() does not support arity > 5")},te.maybe=function(e,t,n){return e?te._apply(t,[e].concat(ee.call(arguments,2,arguments.length))):e},te.curry=function(e,t,n){return(t=t||[]).length>e.length-1?e.apply(n,t):function(){var r=t.concat(ee.call(arguments));return te.curry(e,r,n)}};var re=new function(){J.call(this),this.render=te.curry(ne,[this,"onrender"]),this.remove=te.curry(ne,[this,"onremove"])};function oe(e,t){t.multiplay||w.forEach((function(t){e!=t&&(t.toggleFullScreen(!1),t.pause())}))}function ae(e){e.setState("is-autoplay",!1),e.setState(L,!1),e.setState(R,!1),e.setState(A,!0),0==e.currentTime&&e.setState(N,!0),e.setState("no-autoplay",!0)}function ie(e){return e.catch((function(e){if("AbortError"!=e.name)throw e}))}function ue(e,t,n){var r=n.muted;return t.__pending_play=ie(e),e.catch((function(e){if(t.paused)return function(e){return X.AUDIO_REQUIRED&e.autoplay}(n)?{err:X.AUDIO_REQUIRED}:function(e,t){return e.muted=t.muted=!0,ie(e.play())}(t,n)})).then((function(){oe(t,n)})).catch((function(e){t.started||(n.autoplay=!1,n.muted=r,t.toggleMute(!1),ae(t),console.error(e))})).then((function(){t.__pending_play=void 0,t.setState(R,!1)}))}function se(e,t,n){var r="boolean"==typeof n;if("boolean"!=typeof n&&(n=e.paused),!function(e,t,n){var r=e.emit(t?"beforeplay":"beforepause",{forced:n},{return_self:!1});return r&&r.defaultPrevented}(e,n,r))try{if(0==n)return e.pause();var o=e.__pending_play;if(0==e.paused&&!o)return;if(o)return o.src!==le(e.original_src)&&ce(e),e.__pending_play;(function(e){return(0==e.networkState||0==e.readyState)&&e.currentSrc==le(e.original_src)})(e)&&ce(e);var a=e.play();if(a&&(a.src=le(e.original_src)),a&&"function"==typeof a.catch)return ue(a,e,t);e.paused&&n&&0==e.currentTime&&ae(e),oe(e,t)}catch(t){e.emit("error",t)}}function ce(e){e.currentSrc.match(/^blob:/)||e.load()}function le(e){var t=document.createElement("a");return t.href=e,t.href}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function de(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function pe(e){var t=document.createElement("a");t.href=e;var n=t.pathname&&t.pathname.split(".");return n.length>1&&n[n.length-1]}function ve(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}var ye,he=function(e){var t=e.src,n=de(e,["src"]);return[fe({src:t,type:ve("video/"+pe(t))},n)]};function me(e){var t,n=e.split("{"),r=n[0],o=n[1];return o?(t=r,o.slice(0,-1).split(",").map((function(e){return{src:t+e,type:ve("video/"+e)}}))):he({src:e})}function ge(e){var t=e.src,n=e.type,r=de(e,["src","type"]);return t&&n?[fe({src:t,type:n},r)]:he(fe({src:t},r))}function Ee(e,t,n){n=function(e){return"string"==typeof e?me(e):Array.isArray(e)||"object"!=typeof e?e.reduce((function(e,t){return"string"==typeof t&&(t=me(t)),"object"!=typeof t||Array.isArray(t)||(t=ge(t)),e.concat(t)}),[]):ge(e)}(n),e.currentSrc&&(e.innerHTML="");for(var r=0;r<n.length;r++){var o=n[r];if(ye.Ok==Se(e,t,o))break;if(ye.Ok==we(e,t,o))break;r==n.length-1&&(e.src=o.src)}return function(e,t){(function(e,t){if(!e.currentSrc)return;if("none"==t.preload)return;if(t.autoplay&&t.autoplay>0)return;e.load()})(e,t),"none"==t.preload&&e.render()}(e,t),e}function Se(e,t,n){e.emit("src",n),e.original_src=n.src;var r=function(e,t){return W().filter((function(n){return n.wants(t.src,t,e)}))}(t,n);return 0==r.length?ye.Err:(r[0].call(e,t,e.root,e,n),ye.Ok)}function we(e,t,n){return/^audio\//.test(n.type||"")&&e.emit("audioonlysource"),t.start_time&&(n.src=n.src+"#t="+t.start_time),""==e.canPlayType(n.type||"")?ye.Err:(e.src=n.src,ye.Ok)}!function(e){e[e.Err=0]="Err",e[e.Ok=1]="Ok"}(ye||(ye={}));var _e=["loop","muted","preload"];function be(e){var t=Array(e.length),n=0;if(0==e.length)return t;for(;n<e.length;)t[n]=[e.start(n),e.end(n)],n++;return t}function Oe(e,r,o){o.toJSON=function(){return{duration:o.duration,volume:o.volume,currentTime:o.currentTime,buffered:be(o.buffered),played:be(o.played),states:o.root.className}},o.setSrc=function(t){return Ee(o,e,t)},o.playerState=o.playerState||{},o.setState=function(e,t){var r={};return r[e]=t,(r=n({},o.playerState,r))[L]&&(r[O]=!1),o.playerState=r,o.emit("state",o.playerState)},o.hasState=function(e){return!!o.playerState[e]},o.transitionState=function(e,t,n){o.hasState(e)&&(n=0),n&&o.setState("is-toggling",!0),o.setState(t,!1),o.setState(e,!0),n&&setTimeout((function(){o.setState("is-toggling",!1)}),n)},o.render=function(e,t){return"string"==typeof e?re.render(e,t):(o.emit(x().ios?U:D),o.emit("canplay"),o)},o.togglePlay=function(t,n){var r=se(o,e,t);return"function"!=typeof n?r:r&&"object"==typeof r&&"catch"in r?r.then(n):n()},o.toggleMute=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.muted=!o.muted,o.muted||o.volume||(o.volume=1),o.emit("volumechange")},o.toggleDisable=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.setState("is-disabled",e),o.disabled=e},o.destroy=o.reap=function(e){o.pause();var t=w.indexOf(o);~t&&w.splice(t,1),o.emit("reap"),setTimeout((function(){o.setSrc([]),"function"==typeof e&&e()}),0)},o.setAttrs=function(e){_e.forEach((function(t){var n=s(e[t]);if(n)return o.attr(t,n),void(t in o&&(o[t]=n));!1===n&&(o.removeAttribute(t),t in o&&(o[t]=n))}))},o.setOpts=function(n){if(0!=o.reaper){t(e,n);var a=!!e.autoplay&&!o.hasState("no-autoplay");o.setState("is-autoplay",a),o.setState("is-rtl",!!e.rtl),o.setState("is-live",!!e.live),o.setState("no-timeline",!(!e.live||e.dvr)),o.setState(R,!(!e.seamless&&!a)),o.setState("has-poster","string"==typeof e.poster&&e.poster.length>0),r.style.backgroundImage=o.hasState("has-poster")?"url("+e.poster+")":"",o.emit("config",e)}}}function Ae(e,t){var n=t.querySelector("video"),r=S(n||(e._video_element_callback?e._video_element_callback(e):document.createElement("video")));return r.addClass("fp-engine"),Y(r),r.async=void 0!==n,r.async&&!r.paused?(r.setState(O,!0).setState(R,!0),r):(r.attr("playsinline",""),r.attr("webkit-playsinline",""),t.append(r),r)}function Te(){if("undefined"==typeof document)return!1;var e=document.documentElement;return e&&"rtl"==e.getAttribute("dir")}function Ne(e){if(!e)return Te();var t=e.getAttribute("dir");return t?"rtl"==t:Te()}function Ce(e){try{return Re.validate(e),{success:!0}}catch(e){return{success:!1,message:e.message}}}var Ie=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io"];function Le(e,t){return!!~Ie.indexOf(e)||e.indexOf(t)===e.length-t.length}function Re(e,t){var n={};t=t||{};try{n=Q(e),this.valid_jwt=!0}catch(e){}this.raw=e,this.data=JSON.parse(n.c||"{}"),this.exp=n.exp,t.require_valid_token&&Re.validate(this)}function ke(e,n){if("function"!=typeof e){"string"==typeof n&&(n={src:n}),n=t({controls:!0,preload:"none"},n);var r=S(e);if(n=t({rtl:Ne(r)},n),!r)return console.error(new Error("Flowplayer: '"+e.toString()+"' not found"));if(r.video)return r.video;var o=Ce(n.token);if(!o.success)return Pe(r,null,{reason:"token",details:o.message});if(x().ie>0&&r.addClass("poor-flex"),!x().video)return r.append(S.img({src:n.poster}));var a=Y(r),i=a.put("video",Ae(n,r));i.once("reap",a.run),a.put("video.root",r),!~w.indexOf(i)&&w.push(i),Oe(n,r,i),i.setAttrs(n),G.forEach((function(e){"function"==typeof e.onapi&&e.onapi.call(ke,n,r,i)})),G.forEach((function(e){e.call(ke,n,r,i)})),i.reaper.put("opts",n),i.setOpts(n),n.src&&i.setSrc(n.src);var u=i.readyState;return u>0&&i.currentSrc&&i.emit(U),u>2&&i.currentSrc&&i.emit("canplay"),"none"==n.preload&&i.paused&&i.currentSrc&&i.render(),i.emit("mount"),i.on("error:fatal",(function(e){Pe(r,i,e.data)})),i}for(var s=0;s<arguments.length;++s){var c=arguments[s];G.push(c),"function"==typeof c.onumd&&c.onumd(ke)}}function Pe(e,t,n){t&&t.destroy(),e.innerHTML="",e.removeClass("flowplayer"),e.addClass("flowplayer-fatal"),e.append(S.el("h2",{},"Playback error")),e.append(S.p({},"Are you the site owner?")),e.append(S.a({className:"troubleshoot",target:"_blank",href:"https://flowplayer.com/help/developers/troubleshooting?reason="+n.reason},"Troubleshoot")),e.append(S.a({},S.img({src:"https://flowplayer.com/user/pages/images/logo-white.png"}))),console.error(new Error(n.details||n.reason))}return Le.check_whitelist=function(e){return!!~Ie.indexOf(e)},Re.validate=function(e){if("string"==typeof e&&(e=new Re(e)),!e||!e.raw){if(Le.check_whitelist(window.location.hostname))return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");var t=window.location.hostname,n=Le.bind(null,t);if(e.data.domain&&e.data.domain.length&&!e.data.domain.some(n))throw new Error("Domain not allowed");if(1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},Re.id=function(e){if(e)return"string"==typeof e&&(e=new Re(e)),e.data.id},n(ke,function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t=e.flowplayer?e.flowplayer:{extensions:[]};return Array.isArray(t.extensions)||(t.extensions=[]),t}()),function(e){Array.isArray(e.extensions)&&e.extensions.forEach((function(e){G.push(e)})),e.components=re,e.version="2.5.9",e.commit="840795466bb8acfea048dd52d6930820f4cb54e8",e.Players=b,e.instances=w,e.extensions=G,e.loaders=W,e.support=x,e.events=M,e.states=k,e.mq=S,e.jwt=Q,e.util=c,e.observable=d,e.Reaper=Y,e.autoplay=e.autoplay_options=X,e.extensions.forEach((function(t){"function"==typeof t.onumd&&t.onumd(e)}))}(ke),"object"==typeof document&&"function"==typeof document.emit&&setTimeout(document.emit,0,"flowplayer:umd",ke),ke}));
