!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).flowplayer=t()}(this,(function(){"use strict";var e=[].slice;function t(e,t){for(var n in t)e[n]=t[n];return e}function n(){var n=e.call(arguments),r=n.shift();return n.reduce(t,r)}function r(e){return Array.isArray(e)?e.slice(0):e.split(".")}function o(e,t,n){for(t=r(t);t.length;){if(null==e)return n;e=e[t.shift()]}return null==e?n:e}function i(e,t,n){var i=(t=r(t)).pop(),a=o(e,t);return a&&(a[i]=n),e}function a(e){return(e=parseInt(e,10))>=10?e:"0"+e}function u(t){return e.call(t)}function s(e){return"string"!=typeof e?e:isNaN(e)?"false"!=e&&("true"==e||e):Number(e)}var c=Object.freeze({__proto__:null,noop:function(){},safe:function(e,t){return function(){try{return e.apply(t,arguments)}catch(e){return null}}},extend:t,assign:n,make_path:r,lens:o,put:i,get:function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){var e=r.status;e>=400&&n&&n(e),200==e&&4==r.readyState&&t(r.responseText)},r.send()},zero_pad:a,prettyTime:function(e){if(isNaN(e)||e>=Number.MAX_SAFE_INTEGER)return"";var t=e<0?"-":"";e=Math.abs(e);var n=Math.floor(e/3600),r=Math.floor(e/60);return e-=60*r,n>=1?t+n+":"+a(r-=60*n)+":"+a(e):t+a(r)+":"+a(e)},toArray:u,box:function(e){var t={val:e};return function(e){return void 0!==e&&(t.val=e),t.val}},as_bool:s}),f=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()&&{passive:!0},l=["touchstart","touchmove"];function d(e){return e.emit=function(n,r,o){o=o||{};var i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}(n);return r&&t(i,{data:r||{}}),e.dispatchEvent(i),!1===o.return_self?i:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(e){return~l.indexOf(e)}(t)?e.addEventListener(t,n,f):e.addEventListener(t,n)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function r(o){e.off(t,r),n(o)}))},e}var p=Array.isArray,E="undefined"!=typeof window&&d(window),v="undefined"!=typeof document&&d(document),A=["span","a","em","p","i"],y=A.concat(["div","strong","video","img","ol","ul","li","script"]);function h(e,t,n){var r=m(document.createElement(e));if(p(t)&&(n=t,t=!1),p(n)||(n=[n]),r.append(n.filter((function(e){return e}))),"object"!=typeof t)return r;for(var o in t)o in r?r[o]=t[o]:r.setAttribute(o,t[o]);return r}function m(e){return void 0===e||function(e){return e&&e.__flowplayer__}(e)?e:function(e){var t=e.tagName;e.__flowplayer__=1,e.find=function(t){var n=e.querySelector(t);return n?m(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML="",e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var n=e.insert=function(t,n){return p(n)?n.map((function(n){return e.insert(t,n)}))[0]:m(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n))};return e.append=n.bind(e,"beforeend"),e.prepend=n.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var r in t)e.css(r,t[r]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~A.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(" ").forEach((function(t){e.hasClass(t)||(e.className+=(e.className?" ":"")+t)})),e},e.removeClass=function(t){t=t.split(" ");var n=e.className.split(" ");return e.className=n.filter((function(e){return!~t.indexOf(e)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(t){return u(e.querySelectorAll(t))},e.hasClass=function(t){return~e.className.split(" ").indexOf(t)},e}(d(e))}function S(e,t){if("string"==typeof e&&"<"==e[0])return h(e.slice(1,-1),t);if("string"!=typeof e)return m(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?m(n):void 0}S.window=E,S.document=v,S.el=h,y.forEach((function(e){S[e]=function(t,n){return"string"==typeof t&&(t={class:t}),h(e,t,n)}}));var g=[];function T(){return g.filter((function(e){return!e.paused}))}var N=Object.freeze({__proto__:null,instances:g,playing:T}),_={MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:"loadedmetadata",DATA:"loadeddata",PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource"},w={FULLSCREEN:"is-fullscreen",PLAYING:"is-playing",PAUSED:"is-paused",MUTED:"is-muted",LOADED:"is-loaded",LOADING:"is-loading",STARTING:"is-starting",SEEKING:"is-seeking",GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:"is-ended",LIVE:"is-live",ERRORED:"is-error",WAITING:"is-waiting",AUTOPLAY:"is-autoplay",SEAMLESS:"is-seamless",NO_AUTOPLAY:"no-autoplay",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline",HAS_POSTER:"has-poster"};function I(e,t){try{var n=t.exec(e)[1];return parseFloat(n,10)}catch(e){return console.error(e),0}}function O(){var e="undefined"!=typeof document&&"undefined"!=typeof window,t=e?navigator.userAgent:"",n=/iP(hone|od)/i.test(t)&&!/iPad/.test(t)&&!/IEMobile/i.test(t),r=/Android/.test(t)&&!/Firefox/.test(t),o=/IEMobile/.test(t),i=o?I(t,/Windows Phone (\d+\.\d+)/):0,a=o?I(t,/IEMobile\/(\d+\.\d+)/):0,u=/^((?!chrome|android).)*safari/i.test(t),s=function(){if(!e)return!1;if(document.documentMode)return document.documentMode;for(var t=9;t>3;t--){var n=document.createElement("div");if(n.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",n.getElementsByTagName("span").length)return t}return!1}();return{controls:!n&&(!o||i>=8.1&&a>=11),video:function(t){return e&&document.createElement("video").canPlayType(t)},lang:e&&(window.navigator.userLanguage||window.navigator.language),android:r,iphone:n,ie:s,safari:u,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}}function L(e,t){var n=t.clientWidth;t.toggleClass(w.SMALL,n<600).toggleClass(w.TINY,n<400)}S.window&&S.window.on([_.LOAD,_.RESIZE],(function(){g.forEach((function(e){var t=e.root;t.prevWidth!=t.clientWidth&&(e.emit(_.RESIZE),t.prevWidth=t.clientWidth)}))}));function R(e){var t=function(e){var t=e.getBoundingClientRect(),n=window.innerHeight,r=t.height,o=t.bottom,i=r/5;return t.top<=i&&t.top+r>n-i||o-r+i>=0&&o<n+i}(e.root);return e.in_viewport===t||(e.in_viewport=t,e.emit(t?_.VIEW_ENTER:_.VIEW_LEAVE)),e}S.window&&S.window.on(_.SCROLL,(function(){g.forEach(R)}));var b=[function(e,t,n){var r=!0;t.addClass("flowplayer"),L(0,t),n.on([_.LOAD_START,_.RESIZE],(function(){L(0,t)})),n.on(_.STATE,(function(e){Object.keys(n.playerState).forEach((function(n){t.toggleClass(n,e.data[n])}))})),n.on(_.TIME_UPDATE,(function(){n.setState(w.WAITING,!1)})),n.on(_.CONFIG,(function(){var r=n.paused&&(!e.autoplay||t.hasClass(w.NO_AUTOPLAY))&&0==n.currentTime;[w.LOADING,w.STARTING].forEach((function(e){n.setState(e,r)}))})),n.on(_.ENDED,(function(t){setTimeout((function(){t.defaultPrevented||(e.rewind&&!n.loop&&(e.autoplay&&(e.autoplay=!1,n.setState(w.AUTOPLAY,!1),n.setState(w.SEAMLESS,!1)),n.setState(w.SEEKING,!0),n.one(_.SEEKED,(function(){n.setState(w.SEEKING,!1),n.pause(),n.setState(w.STARTING,!0)})),n.currentTime=0),n.one(_.TIME_UPDATE,(function(){n.setState(w.ENDED,!1)})),n.transitionState(w.ENDED,w.PLAYING,e.loop||e.rewind?0:300))}),0)})),n.on([_.SEEKING,_.SEEKED],(function(e){n.setState(w.SEEKING,e.type==_.SEEKING),n.setState(w.PAUSED,n.paused),n.setState(w.PLAYING,!n.paused)})),n.on(_.ENDED,(function(){r=!0})),n.on(O().ios?_.METADATA:_.DATA,(function(t){var r="src"!=t.type||!("none"==e.preload);n.setState(w.LOADED,r),n.setState(w.LOADING,!r)})),n.on([_.WAITING,_.CAN_PLAY,_.LOAD_START],(function(t){if(!n.hasState(w.SEEKING)&&(t.type!=_.CAN_PLAY||e.autoplay||n.setState(w.WAITING,!1),t.type!=_.LOAD_START||"none"!=e.preload||e.autoplay)){if(t.type==_.LOAD_START&&e.autoplay)return n.one(_.PLAYING,(function(){n.setState(w.WAITING,!1)}));t.type==_.WAITING&&[w.PLAYING,w.PAUSED,w.STARTING].forEach((function(e){n.setState(e,!1)})),n.setState(w.ENDED,!1);var r=[_.WAITING];n.setState(w.WAITING,r.indexOf(t.type)>-1)}})),n.on([_.PLAYING,_.PAUSE],(function(t){var o=t.type==_.PLAYING,i=n.currentTime==n.duration,a=o&&r&&e.autoplay||n.hasState(w.SEAMLESS)||n.hasState(w.WAITING);if(o&&(n.started=!0),!e.seamless&&r&&n.setState(w.SEAMLESS,!1),o&&(r=!1),n.setState(w.WAITING,!1).setState(w.STARTING,!1),!i&&!n.hasState(w.SEEKING)){r&&n.setState(w.STARTING,!1);var u=o?w.PLAYING:w.PAUSED,s=o?w.PAUSED:w.PLAYING;n.transitionState(u,s,a?0:300),o&&n.setState(w.NO_AUTOPLAY,!1)}}))},function(e,t,n){var r=S.div({class:"fp-ratio"});r.set=function(e){e=function(e){if("number"==typeof e&&!isNaN(e))return Number(e);if("string"==typeof e){var t=e.split(":");return Number(t[1])/Number(t[0])}return e}(e||.5625),r.css("padding-top",isNaN(e)?e:100*e+"%")},t.reaper.put("aspect_ratio",r),t.append(r);var i=[_.DATA,_.METADATA];n.on(i,(function(){r.set(e.ratio||n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth)})),n.on(_.CONFIG,(function(e){r.set(o(e,"data.ratio",n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth))}))},function(e,t,n){R(n);var r={should_resume:e.autoplay,has_user_gesture:!1,locked:!1};n.one([_.TOUCH_END,_.CLICK],(function(){r.has_user_gesture=!0})),n.on(_.PLAY,(function(){r.locked||(r.should_resume=!0)})),n.on(_.PAUSE,(function(){r.locked||(r.should_resume=!1)})),n.on(_.CAN_PLAY,(function(t){e.autoplay&&!T().size&&n.in_viewport&&n.paused&&r.should_resume&&n.togglePlay(!0)})),e.autopause&&(n.on(_.VIEW_ENTER,(function(){r.should_resume&&n.togglePlay(!0)})),n.on(_.VIEW_LEAVE,(function(){var e=!n.paused;r.locked=!0,n.pause(),setTimeout((function(){r.should_resume=e,r.locked=!1}),0)})))}];function D(){return b.filter((function(e){return"function"==typeof e.wants}))}function P(e){return Array.isArray(e)?e.join("."):e}function C(e,t){return t.length-e.length}function G(e){if(void 0!==e){if(e.reaper)return e.reaper;if(!(this instanceof G))return new G(e);var t=e.reaper=this;return t.tree=e,t.props=[],t.push=function(e){return t.props=t.props.concat(e),t},t.put=function(n,r){return t.push(n),i(e,n,r),r},t.run=function(n){(n=Array.isArray(n)?n:[]).push(t);for(var r=t.props.map(P).sort(C);r.length;){var a=r.shift(),u=o(e,a);u&&u.reaper&&!~n.indexOf(u.reaper)&&u.reaper.run(n),i(e,a,0)}for(var s in t)delete t[s];delete n[n.indexOf(t)],e.reaper=0},t}}function U(e){this.message=e}U.prototype=new Error,U.prototype.name="InvalidCharacterError";var M="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new U("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};var k=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(M(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return M(t)}};function x(e){this.message=e}x.prototype=new Error,x.prototype.name="InvalidTokenError";var Y=function(e,t){if("string"!=typeof e)throw new x("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(k(e.split(".")[n]))}catch(e){throw new x("Invalid token specified: "+e.message)}};Y.InvalidTokenError=x;var W={OFF:0,ON:1,AUDIO_REQUIRED:2};function H(){var e=this,t={};e.has=function(e){return!!t[e]},e.get=function(e){return t[e]},e.put=function(n,r){return t[n]=r,e},e.delete=function(n){return delete t[n],e},e.keys=function(){var e=[];for(var n in t)e.push(n);return e},e.each=function(n,r){for(var o in t)n.call(r||e,t[o],o);return e}}function F(e){return"function"==typeof e}function V(){throw new Error("Function was expected as Argument[0]")}var K=[].slice;function j(e){if(!(this instanceof j))return new j(e);var t=this;return t.data=e,t.tap=function(){var e=K.call(arguments),n=e.shift();return n==j.lift?t.data:F(n)?(n.apply(t,[t.data].concat(e)),t):void V()},t.into=t.fmap=function(){var e=K.call(arguments),n=e.shift();return n==j.lift?t.data:F(n)?j(n.apply(t,[t.data].concat(e))):void V()},t.unwrap=function(){return t.data},t}function B(e,t,n,r){j.of(n).fmap(e.get).fmap(o,t).fmap(j.maybe,j.apply,r)}j.of=j,j.lift=function(e){return e instanceof j?e.data:e},j._apply=j.apply=function(e,t){if(0==t.length)return e();if(1==t.length)return e(t[0]);if(2==t.length)return e(t[0],t[1]);if(3==t.length)return e(t[0],t[1],t[2]);if(4==t.length)return e(t[0],t[1],t[2],t[3]);if(5==t.length)return e(t[0],t[1],t[2],t[3],t[4]);throw new Error("Pipe._apply() does not support arity > 5")},j.maybe=function(e,t,n){return e?j._apply(t,[e].concat(K.call(arguments,2,arguments.length))):e},j.curry=function(e,t,n){return(t=t||[]).length>e.length-1?e.apply(n,t):function(){var r=t.concat(K.call(arguments));return j.curry(e,r,n)}};var q=new function(){H.call(this),this.render=j.curry(B,[this,"onrender"]),this.remove=j.curry(B,[this,"onremove"])};var z;function Q(e,t){t.multiplay||g.forEach((function(t){e!=t&&(t.toggleFullScreen(!1),t.pause())}))}function X(e){e.setState(w.AUTOPLAY,!1),e.setState(w.WAITING,!1),e.setState(w.SEAMLESS,!1),e.setState(w.PAUSED,!0),0==e.currentTime&&e.setState(w.STARTING,!0),e.setState(w.NO_AUTOPLAY,!0)}function Z(e){return e.catch((function(e){if("AbortError"!=e.name)throw e}))}function J(e,t,n){var r=n.muted;return t.__pending_play=Z(e),e.catch((function(e){if(t.paused)return function(e){return W.AUDIO_REQUIRED&e.autoplay}(n)?{err:W.AUDIO_REQUIRED}:function(e,t){return e.muted=t.muted=!0,Z(e.play())}(t,n)})).then((function(){Q(t,n)})).catch((function(e){t.started||(n.autoplay=!1,n.muted=r,t.toggleMute(!1),X(t),console.error(e))})).then((function(){t.__pending_play=void 0,t.setState(w.SEAMLESS,!1)}))}function $(e,t,n){var r="boolean"==typeof n;if("boolean"!=typeof n&&(n=e.paused),!function(e,t,n){var r=e.emit(t?_.BEFORE_PLAY:_.BEFORE_PAUSE,{forced:n},{return_self:!1});return r&&r.defaultPrevented}(e,n,r))try{if(0==n)return e.pause();var o=e.__pending_play;if(0==e.paused&&!o)return;if(o)return o.src!==te(e.original_src)&&ee(e),e.__pending_play;(function(e){return(0==e.networkState||0==e.readyState)&&e.currentSrc==te(e.original_src)})(e)&&ee(e);var i=e.play();if(i&&(i.src=te(e.original_src)),i&&"function"==typeof i.catch)return J(i,e,t);e.paused&&n&&0==e.currentTime&&X(e),Q(e,t)}catch(t){e.emit(_.ERROR,t)}}function ee(e){e.currentSrc.match(/^blob:/)||e.load()}function te(e){var t=document.createElement("a");return t.href=e,t.href}function ne(e){var t=document.createElement("a");t.href=e;var n=t.pathname&&t.pathname.split(".");return n.length>1&&n[n.length-1]}function re(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}function oe(e){var t=e.split("{"),n=t[1];return n?n.slice(0,-1).split(",").map((function(e){return{src:t[0]+e,type:re("video/"+e)}})):[{src:e,type:re("video/"+ne(e))}]}function ie(e){var t=e.src,n=e.type;return t&&n?[{src:t,type:n}]:[{src:t,type:re("video/"+ne(t))}]}function ae(e,t,n){n=function(e){return"string"==typeof e?oe(e):Array.isArray(e)||"object"!=typeof e?e.reduce((function(e,t){return"string"==typeof t&&(t=oe(t)),"object"!=typeof t||Array.isArray(t)||(t=ie(t)),e.concat(t)}),[]):ie(e)}(n),e.currentSrc&&(e.innerHTML="");for(var r=0;r<n.length;r++){var o=n[r];if(z.Ok==ue(e,t,o))break;if(z.Ok==se(e,t,o))break;r==n.length-1&&(e.src=o.src)}return function(e,t){(function(e,t){if(!e.currentSrc)return;if("none"==t.preload)return;if(t.autoplay&&t.autoplay>0)return;e.load()})(e,t),"none"==t.preload&&e.render()}(e,t),e}function ue(e,t,n){e.emit(_.SOURCE,n),e.original_src=n.src;var r=function(e,t){return D().filter((function(n){return n.wants(t.src,t,e)}))}(t,n);return 0==r.length?z.Err:(r[0].call(e,t,e.root,e,n),z.Ok)}function se(e,t,n){return/^audio\//.test(n.type||"")&&e.emit(_.AUDIO_ONLY_SOURCE),t.start_time&&(n.src=n.src+"#t="+t.start_time),""==e.canPlayType(n.type||"")?z.Err:(e.src=n.src,z.Ok)}!function(e){e[e.Err=0]="Err",e[e.Ok=1]="Ok"}(z||(z={}));var ce=["loop","muted","preload"];function fe(e){var t=Array(e.length),n=0;if(0==e.length)return t;for(;n<e.length;)t[n]=[e.start(n),e.end(n)],n++;return t}function le(e,r,o){o.toJSON=function(){return{duration:o.duration,volume:o.volume,currentTime:o.currentTime,buffered:fe(o.buffered),played:fe(o.played),states:o.root.className}},o.setSrc=function(t){return ae(o,e,t)},o.playerState=o.playerState||{},o.setState=function(e,t){var r={};return r[e]=t,(r=n({},o.playerState,r))[w.WAITING]&&(r[w.PLAYING]=!1),w.STARTING||(r[w.PAUSED]=!r[w.PLAYING]),o.playerState=r,o.emit(_.STATE,o.playerState)},o.hasState=function(e){return!!o.playerState[e]},o.transitionState=function(e,t,n){o.hasState(e)&&(n=0),n&&o.setState(w.TOGGLING,!0),o.setState(t,!1),o.setState(e,!0),n&&setTimeout((function(){o.setState(w.TOGGLING,!1)}),n)},o.render=function(e,t){return"string"==typeof e?q.render(e,t):(o.emit(O().ios?_.METADATA:_.DATA),o.emit(_.CAN_PLAY),o)},o.togglePlay=function(t,n){var r=$(o,e,t);return"function"!=typeof n?r:r&&"object"==typeof r&&"catch"in r?r.then(n):n()},o.toggleMute=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.muted=!o.muted,o.muted||o.volume||(o.volume=1),o.emit(_.VOLUME_CHANGE)},o.toggleDisable=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.setState(w.DISABLED,e),o.disabled=e},o.destroy=o.reap=function(e){o.pause();var t=g.indexOf(o);~t&&g.splice(t,1),o.emit(_.REAP),setTimeout((function(){o.setSrc([]),"function"==typeof e&&e()}),0)},o.setAttrs=function(e){ce.forEach((function(t){var n=s(e[t]);if(n)return o.attr(t,n),void(t in o&&(o[t]=n));!1===n&&(o.removeAttribute(t),t in o&&(o[t]=n))}))},o.setOpts=function(n){if(0!=o.reaper){t(e,n);var i=!!e.autoplay&&!o.hasState(w.NO_AUTOPLAY);o.setState(w.AUTOPLAY,i),o.setState(w.RTL,!!e.rtl),o.setState(w.LIVE,!!e.live),o.setState(w.NO_DVR,!(!e.live||e.dvr)),o.setState(w.SEAMLESS,!(!e.seamless&&!i)),o.setState(w.HAS_POSTER,"string"==typeof e.poster&&e.poster.length>0),r.style.backgroundImage=o.hasState(w.HAS_POSTER)?"url("+e.poster+")":"",o.emit(_.CONFIG,e)}}}function de(e,t){var n=t.querySelector("video"),r=S(n||(e._video_element_callback?e._video_element_callback(e):document.createElement("video")));return r.addClass("fp-engine"),G(r),r.async=void 0!==n,r.async&&!r.paused?(r.setState(w.PLAYING,!0).setState(w.SEAMLESS,!0),r):(r.attr("playsinline",""),r.attr("webkit-playsinline",""),t.append(r),r)}function pe(){if("undefined"==typeof document)return!1;var e=document.documentElement;return e&&"rtl"==e.getAttribute("dir")}function Ee(e){if(!e)return pe();var t=e.getAttribute("dir");return t?"rtl"==t:pe()}var ve="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ae(e){try{return me.validate(e),{success:!0}}catch(e){return{success:!1,message:e.message}}}var ye=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io"];function he(e,t){return!!~ye.indexOf(e)||e.indexOf(t)===e.length-t.length}function me(e,t){var n={};t=t||{};try{n=Y(e),this.valid_jwt=!0}catch(e){}this.raw=e,this.data=JSON.parse(n.c||"{}"),this.exp=n.exp,t.require_valid_token&&me.validate(this)}function Se(e,n){if("function"!=typeof e){"string"==typeof n&&(n={src:n}),n=t({controls:!0,preload:"none"},n);var r=S(e);if(n=t({rtl:Ee(r)},n),!r)return console.error(new Error("Flowplayer: '"+e.toString()+"' not found"));if(r.video)return r.video;var o=Ae(n.token);if(!o.success)return ge(r,null,{reason:"token",details:o.message});if(O().ie>0&&r.addClass("poor-flex"),!O().video)return r.append(S.img({src:n.poster}));var i=G(r),a=i.put("video",de(n,r));a.once(_.REAP,i.run),i.put("video.root",r),!~g.indexOf(a)&&g.push(a),le(n,r,a),a.setAttrs(n),b.forEach((function(e){"function"==typeof e.onapi&&e.onapi.call(Se,n,r,a)})),b.forEach((function(e){e.call(Se,n,r,a)})),a.reaper.put("opts",n),a.setOpts(n),n.src&&a.setSrc(n.src);var u=a.readyState;return u>0&&a.currentSrc&&a.emit(_.METADATA),u>2&&a.currentSrc&&a.emit(_.CAN_PLAY),"none"==n.preload&&a.paused&&a.currentSrc&&a.render(),a.emit(_.MOUNT),a.on(_.NON_RECOVERABLE_ERROR,(function(e){ge(r,a,e.data)})),a}for(var s=0;s<arguments.length;++s){var c=arguments[s];b.push(c),"function"==typeof c.onumd&&c.onumd(Se)}}function ge(e,t,n){t&&t.destroy(),e.innerHTML="",e.removeClass("flowplayer"),e.addClass("flowplayer-fatal"),e.append(S.el("h2",{},"Playback error")),e.append(S.p({},"Are you the site owner?")),e.append(S.a({className:"troubleshoot",target:"_blank",href:"https://flowplayer.com/help/developers/troubleshooting?reason="+n.reason},"Troubleshoot")),e.append(S.a({},S.img({src:"https://flowplayer.com/user/pages/images/logo-white.png"}))),console.error(new Error(n.details||n.reason))}return he.check_whitelist=function(e){return!!~ye.indexOf(e)},me.validate=function(e){if("string"==typeof e&&(e=new me(e)),!e||!e.raw){if(he.check_whitelist(window.location.hostname))return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");var t=window.location.hostname,n=he.bind(null,t);if(e.data.domain&&e.data.domain.length&&!e.data.domain.some(n))throw new Error("Domain not allowed");if(1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},me.id=function(e){if(e)return"string"==typeof e&&(e=new me(e)),e.data.id},n(Se,function(){var e="undefined"!=typeof window?window:void 0!==ve?ve:{},t=e.flowplayer?e.flowplayer:{extensions:[]};return Array.isArray(t.extensions)||(t.extensions=[]),t}()),function(e){Array.isArray(e.extensions)&&e.extensions.forEach((function(e){b.push(e)})),e.components=q,e.version="2.5.1",e.commit="7420bd6a559a8096ec5608f737a10cc621878074",e.Players=N,e.instances=g,e.extensions=b,e.loaders=D,e.support=O,e.events=_,e.states=w,e.mq=S,e.jwt=Y,e.util=c,e.observable=d,e.Reaper=G,e.autoplay=e.autoplay_options=W,e.extensions.forEach((function(t){"function"==typeof t.onumd&&t.onumd(e)}))}(Se),"object"==typeof document&&"function"==typeof document.emit&&setTimeout(document.emit,0,"flowplayer:umd",Se),Se}));
